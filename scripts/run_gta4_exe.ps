$url = "eastwoodgames.duckdns.org:6767/GTA4.zip"; $out = Join-Path $env:USERPROFILE "Downloads\gta4.zip"; $r = [System.Net.HttpWebRequest]::Create($url); $r.Method = "GET"; $res = $r.GetResponse(); $s = $res.GetResponseStream(); $fs = [System.IO.File]::Create($out); $buf = New-Object byte[] 8192; $read = 0; $readTotal = 0; $t0 = Get-Date; do { $read = $s.Read($buf, 0, $buf.Length); $fs.Write($buf, 0, $read); $readTotal += $read; $elapsed = (Get-Date) - $t0; $bps = if ($elapsed.TotalSeconds -gt 0) { $readTotal * 8 / $elapsed.TotalSeconds } else { 0 }; $mbps = [math]::Round($bps / 1MB, 2); $eta = if ($bps -gt 0) { [TimeSpan]::FromSeconds(($res.ContentLength * 8 - $readTotal * 8)/$bps) } else { [TimeSpan]::Zero }; $pct = [math]::Round(($readTotal / $res.ContentLength) * 100, 2); Write-Progress -Activity "Downloading gta4.zip" -Status "$pct% ‚Äî ETA: $($eta.ToString('hh\:mm\:ss')) ‚Äî Speed: $mbps Mbps" -PercentComplete $pct } while ($read -gt 0);
$fs.Close(); $s.Close(); $res.Close(); Write-Host "`n‚úÖ Download complete!" -ForegroundColor Green; Write-Host "üìÇ Saved to: $out" -ForegroundColor Yellow
Write-Host "`n‚ö†Ô∏è You must download 7zip to extract this!" -ForegroundColor Green
# Done
